;@----------------------------------------------------------------------------
	#include "mmc3.i"
;@----------------------------------------------------------------------------
	.global mapper268init

	.struct mmc3Extra

;@----------------------------------------------------------------------------
.section .text,"ax"
;@----------------------------------------------------------------------------
;@ MMC3 with outer banking
mapper268init:
;@----------------------------------------------------------------------------
	.word mmc3MappingW, mmc3MirrorW, mmc3CounterW, mmc3IrqEnableW

	// Set Depending on sub mapper.
	adr r0, write5
	str_ r0, rp2A03MemWrite
	adr r1, write6
	adr r1, write7
	str_ r1,m6502WriteTbl+12

	b mmc3Init

;@----------------------------------------------------------------------------
write5:		;@ ($5000-$5FFF)
;@----------------------------------------------------------------------------
	cmp addy, #0x5000
	bcc empty_W
	b doBanking
;@----------------------------------------------------------------------------
write6:		;@ ($6000-$6FFF)
;@----------------------------------------------------------------------------
	cmp addy, #0x7000
	bcs empty_W
	b doBanking
;@----------------------------------------------------------------------------
write7:		;@ ($7000-$7FFF)
;@----------------------------------------------------------------------------
	cmp addy, #0x7000
	bcc empty_W
doBanking:
	and r2,addy,#7
	// Do outer banking
	bx lr
